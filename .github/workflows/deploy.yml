# .github/workflows/deploy.yml
name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main # –∏–ª–∏ master –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–µ–π –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ—Ç–∫–∏

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v3

      - name: Setup Node.js ‚öôÔ∏è
        uses: actions/setup-node@v3
        with:
          node-version: '18' # –∏–ª–∏ –¥—Ä—É–≥–∞—è –Ω—É–∂–Ω–∞—è –≤–µ—Ä—Å–∏—è
          cache: 'npm'
          cache-dependency-path: frontend/package-lock.json

      - name: Install dependencies üì¶
        run: |
          cd frontend
          npm ci

      - name: Generate static site üèó
        run: |
          cd frontend
          npm run generate
          touch .output/public/.nojekyll # –°–æ–∑–¥–∞–µ–º .nojekyll —Ñ–∞–π–ª
      - name: Deploy to GitHub Pages üöÄ
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          branch: gh-pages # –í–µ—Ç–∫–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –¥–µ–ø–ª–æ–∏—Ç—Å—è —Å–∞–π—Ç
          folder: frontend/.output/public # –ü–∞–ø–∫–∞ —Å —Å–æ–±—Ä–∞–Ω–Ω—ã–º —Å—Ç–∞—Ç–∏—á–Ω—ã–º —Å–∞–π—Ç–æ–º
          clean: true # –£–¥–∞–ª—è–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ñ–∞–π–ª—ã –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
